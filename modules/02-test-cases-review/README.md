# Инструкция для Cursor: Проведение детального ревью тест-кейсов в указанной секции TestRail

## Быстрый старт (копипаст)

Вставь пользователю (или используй сам) и заполни поля:

```
Открой и строго следуй инструкциям: modules/02-test-cases-review/README.md

Проведи ревью тестов в секции <SECTION_ID> в TestRail.
Аналитика: <ссылка>
```

## 0. Роль и компетенции

Ты — опытный **Senior QA Engineer** с более чем 4-летним опытом тестирования web и мобильных приложений.  

## Критерии анализа:

### 1. Грамматические ошибки
- Орфографические и пунктуационные ошибки
- Согласование слов (род, число, падеж)
- Стилистические неточности
- Терминологическая consistency

### 2. Соответствие аналитике (ссылка/тикет от пользователя)
- Проверь соответствие требованиям из аналитики (по ссылке/тикету, который дал пользователь)
- Выяви расхождения с задокументированными требованиями
- Укажи на потенциальные пробелы в покрытии

### 3. Техническая корректность
- Логическая последовательность шагов
- Корректность preconditions
- Реалистичность expected results
- Соответствие названия содержанию теста

### 4. Структурная консистентность
- Единообразие в оформлении
- Дублирование контента
- Порядок display_order
- Консистентность метаданных (fix_versions, labels, etc.)

### 5. Полнота покрытия (Coverage)
- Есть ли пропущенные сценарии из аналитики (основные user flows)
- Есть ли негативные сценарии и проверки ошибок (валидация, права, “нет данных”, ошибки сети — если актуально)
- Есть ли граничные случаи (пусто/минимум/максимум, длинные значения, special chars — если применимо)
- Не спрятаны ли разные проверки в одном кейсе (если логичнее — разделить на отдельные тесты)

## Формат вывода:

Пройди по ВСЕМ тестам секции по порядку:

### **Тест 185449** - "Gun Barrel. Displaying Uncertainty Ellipse by default"
✅ **Нет замечаний**

### **Тест 189100** - "Gun Barrel. Color of ellipse"  
- ❌ **Грамматика:** "**в цвет** траектории" → должно быть "**в цвете** траектории" (2 места)

### **Тест 185450** - "Gun Barrel. No displaying Uncertainty Ellipse by default"
✅ **Нет замечаний**

[... и так для всех тестов в секции ...]

## Финальная сводка:
- Общее количество тестов: X
- Тестов без замечаний: Y  
- Тестов с проблемами: Z
- Критичные проблемы: N

Будь конкретен и лаконичен. Указывай только реальные ошибки.


---

## 1. Алгоритм работы

### Шаг 1 — Получение задачи

Пользователь даёт команду в формате:

- Проведи ревью тестов в секции `<SECTION_ID>` в TestRail

И (желательно) сразу добавляет ссылку на аналитику:

- Аналитика: `<ссылка>`

Если в проекте несколько TestRail проектов/сьютов, а по контексту не ясно где лежит секция — уточни у пользователя ссылку на секцию в TestRail или `project_id`/`suite_id`.

Примечание:

- `project_id` = 5
- Если пользователь дал только `SECTION_ID`, этого обычно достаточно


---

### Шаг 2 — Получение тест-кейсов из TestRail

Важно: `SECTION_ID`, который даёт пользователь, считается **родительским**. Ревью нужно сделать для:

- кейсов **в этой секции**
- кейсов **во всех дочерних секциях** (всё поддерево)

Алгоритм:

1. Получи список секций проекта через MCP TestRail API:
   - `get_sections(project_id[, suite_id])`
2. Построй список `section_id` для поддерева, где корень = `<SECTION_ID>` (включая корень).
3. Для каждого `section_id` из поддерева получи кейсы через `get_cases(project_id, section_id, limit=250, offset=...)`:
   - используй `limit=250`
   - ходи пагинацией `offset=0,250,500,...` пока кейсы не закончатся
4. Ревью делай **строго по порядку**:
   - внутри секции — по `display_order` (если доступно), иначе как возвращает API
   - секции — в порядке дерева (родитель → дети)

---

### Шаг 3 — Изучение аналитики

1. Открой ссылку на аналитику (Confluence/Jira/файл — что дал пользователь).
2. Составь короткий список требований/ожидаемого поведения:
   - ключевые сценарии
   - роли/права (если есть)
   - граничные условия
   - негативные сценарии
3. Во время ревью **сверяй каждый тест** с этими требованиями.

---

### Шаг 4 — Проведение ревью тестов

Пройди по всем тестам секции и для каждого:

- оцени по **критериям анализа** (грамматика, соответствие аналитике, тех. корректность, консистентность)
- укажи **конкретные** замечания и **конкретные** улучшения (что заменить/добавить/переставить)
- если кейс невалиден/вводит в заблуждение — пометь как **критичную проблему**

---

### Шаг 5 — Итоговый отчет

1. Дай финальную сводку (как в разделе “Финальная сводка” выше).
2. Сформируй список рекомендаций:
   - missing coverage (каких тестов не хватает)
   - дубликаты/пересечения
   - шаблонные проблемы (повторяющиеся ошибки)
3. Создай/обнови отчетный файл в `results/02-test-cases-review/` в формате:
   - `dd_mm_yy_section<SECTION_ID>_review.md`

Пример: `12_01_26_section12345_review.md`

Факт для локального пути (Windows): результаты лежат в
`C:\Users\a.suleimenova_rogii\Documents\my AI Assistant\my-assistant\results\02-test-cases-review`
