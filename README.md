# My Assistant — модульные инструкции для Cursor (LLM + MCP)

Этот репозиторий устроен как набор **модулей**.
Каждый модуль — это отдельная задача/сценарий работы и набор правил (промпт), которые направляют LLM: что делать, какие инструменты вызывать (MCP), какой формат результата выдавать и куда сохранять артефакты.

## Как работает “команда” пользователя

Команда пользователя — это **входные данные** (например, `section_id`, ссылки, ограничения) + просьба выполнить задачу.
LLM **не исполняет команду “сам по себе”** — он должен сначала понять, **по каким правилам** работать (какой модуль применить).


## Маршрутизация команд → модуль (явные правила)

Используем простое правило маршрутизации:

- если команда про **ревью тест-кейсов в TestRail** → модуль `02-test-cases-review`
- если команда про **создание/написание тест-кейсов** → модуль `03-test-cases-writting`
- если команда про **создание/обновление тест-кейса по Playwright автотесту** → модуль `04-test-cases-from-autotests`
- если команда про **написание автотестов по тест-кейсам TestRail** → модуль `05-autotests-from-testrail`
- если команда не подходит под эти описания → уточни у пользователя задачу и предложи завести новый модуль

## Флоу для модуля `05-autotests-from-testrail`

Ввод от пользователя:
- `sectionId` (TestRail)
- ссылка на аналитику
- (опционально) DOM/HTML фрагменты

Порядок работы:
1) найти секцию в TestRail по `sectionId` (уточнить название/путь)
2) создать Jira-задачу на автотесты (Project **QA Automation**, Summary с **`[UI DS]`**, заполнить поля)
3) изучить аналитику
4) изучить тесты (кейсы) в секции TestRail
5) при необходимости запросить/проверить DOM и `data-testid`/`test-id`
6) написать автотест(ы) и сохранить в `results/05-autotests-from-testrail`

Под “ревью тест-кейсов в TestRail” здесь понимается любая задача, где нужно:

- проверить качество/корректность тест-кейсов,
- найти ошибки/несоответствия,
- провести ревью тестов в конкретной секции TestRail (включая дочерние секции),
- сверить тесты с аналитикой/требованиями.

### Типовая команда (пример)

```
Проведи ревью тестов в секции <SECTION_ID> в TestRail (включая все дочерние секции).
Аналитика: <ссылка>
```

Под “созданием/написанием тест-кейсов” здесь понимается любая задача, где нужно:

- составить тест-кейсы по аналитике/чек-листу/макету,
- подготовить набор кейсов для ревью,
- (после подтверждения) добавить кейсы в TestRail в указанную секцию.

### Типовая команда (пример)

```
Создай тест-кейсы по <название фичи/эпика> и подготовь JSON-черновик для ревью.
Секция TestRail: <SECTION_ID>
Аналитика: <ссылка>
```

Под “созданием/обновлением тест-кейса по Playwright автотесту” здесь понимается любая задача, где нужно:

- взять `spec path` и `test name` автотеста,
- создать **или обновить** TestRail кейс в указанной секции,
- выдать результат в 2 частях: человекочитаемый кейс + JSON для TestRail API.

### Типовая команда (пример)

```
Создай (или обнови) тест-кейс в TestRail по автотесту Playwright.
Проект TestRail: <project>
Section: <section_id + название секции>
Refs (Jira): <DS-...>
Автотест:
  spec path: <playwright/tests/...>
  test name: <точное название теста>
```



## Как пользователь должен формулировать запрос (рекомендуемый формат)

Чтобы не было двусмысленности, пользователь всегда указывает модуль и параметры:

```
Модуль: <NN-module-name>
Команда: <что сделать>
Данные/ссылки: <section_id, ссылки на аналитику, контекст>
Ограничения/формат: <если есть>
```

Пример:

```
Модуль: 02-test-cases-review
Команда: Проведи ревью тестов в секции 36224 в TestRail (включая все дочерние секции).
Аналитика: <ссылка>
```

## Где лежат модули

Все модули находятся в `modules/`.

- `modules/02-test-cases-review/README.md` — ревью тест-кейсов в секции TestRail (включая поддерево)
- `modules/03-test-cases-writting/README.md` — создание тест-кейсов по аналитике и добавление в TestRail (после ревью)
- `modules/04-test-cases-from-autotests/README.md` — создание/обновление TestRail кейса по Playwright автотесту
- `modules/05-autotests-from-testrail/README.md` — написание Playwright автотестов на основе TestRail тест-кейсов