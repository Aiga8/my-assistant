# My Assistant — модульные инструкции для Cursor (LLM + MCP)

Этот репозиторий устроен как набор **модулей**.
Каждый модуль — это отдельная задача/сценарий работы и набор правил (промпт), которые направляют LLM: что делать, какие инструменты вызывать (MCP), какой формат результата выдавать и куда сохранять артефакты.

## Как работает “команда” пользователя

Команда пользователя — это **входные данные** (например, `section_id`, ссылки, ограничения) + просьба выполнить задачу.
LLM **не исполняет команду “сам по себе”** — он должен сначала понять, **по каким правилам** работать (какой модуль применить).


## Маршрутизация команд → модуль (явные правила)

Используем простое правило маршрутизации:

- если команда про **ревью тест-кейсов в TestRail** → модуль `02-test-cases-review`
- если команда про **создание/написание тест-кейсов** → модуль `03-test-cases-writting`
- если команда про **создание/обновление тест-кейса по Playwright автотесту** → модуль `04-test-cases-from-autotests`
- если команда про **написание автотестов по тест-кейсам TestRail** → модуль `05-autotests-from-testrail`
- если команда не подходит под эти описания → уточни у пользователя задачу и предложи завести новый модуль



## Флоу для модуля `02-test-cases-review`

Ввод от пользователя:
- `SECTION_ID` (TestRail)
- ссылка на аналитику

Порядок работы:
1) открыть секцию TestRail по `SECTION_ID` (включая дочерние секции)
2) изучить аналитику
3) сделать ревью тест-кейсов: найти ошибки/пробелы/дубли/неоднозначности и несоответствия аналитике
4) выдать результат ревью (списком замечаний/правок по кейсам)

## Флоу для модуля `03-test-cases-writting`

Ввод от пользователя:
- `<название фичи/эпика>`
- `SECTION_ID` (TestRail)
- ссылка на аналитику
- (опционально) ссылка на чек-лист и/или макет (Figma)

Порядок работы:
1) собрать/открыть исходные материалы (аналитика/чек-лист/макет)
2) составить набор тест-кейсов по материалам
3) создать **только JSON-черновик для ревью** и сохранить в `results/03-test-cases-writting`
4) остановиться и дождаться команды пользователя
5) только по команде — добавить кейсы в TestRail


## Флоу для модуля `04-test-cases-from-autotests`

Ввод от пользователя:
- `SECTION_ID` (TestRail)
- файл(ы) с Playwright автотестами (в репозитории)
- режим: `create` или `update`

Порядок работы:
1) прочитать файл(ы) автотестов и выделить тесты
2) определить create/update (если в названии есть `[<caseId>]` → update этого кейса)
3) понять сценарий по коду теста (что делаем и что проверяем)
4) сформировать TestRail кейс (title/preconditions/steps/expected)
5) выдать результат **только JSON** для TestRail API


## Флоу для модуля `05-autotests-from-testrail`

Ввод от пользователя:
- `sectionId` (TestRail)
- ссылка на аналитику
- (опционально) DOM/HTML фрагменты

Порядок работы:
1) найти секцию в TestRail по `sectionId` (уточнить название/путь)
2) создать Jira-задачу на автотесты (Project **QA Automation**, Summary с **`[UI DS]`**, заполнить поля)
3) изучить аналитику
4) изучить тесты (кейсы) в секции TestRail
5) при необходимости запросить/проверить DOM и `data-testid`/`test-id`
6) если найден `NEEDED data-testid`/`MISSING data-testid` — создать Jira-задачу на добавление атрибутов (пример: `DS-12116`)
7) написать автотест(ы) и сохранить в `results/05-autotests-from-testrail`


## Где лежат модули

Все модули находятся в `modules/`.

- `modules/02-test-cases-review/README.md` — ревью тест-кейсов в секции TestRail (включая поддерево)
- `modules/03-test-cases-writting/README.md` — создание тест-кейсов по аналитике и добавление в TestRail (после ревью)
- `modules/04-test-cases-from-autotests/README.md` — создание/обновление TestRail кейса по Playwright автотесту
- `modules/05-autotests-from-testrail/README.md` — написание Playwright автотестов на основе TestRail тест-кейсов